<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.min.login">

<!-- 로그인 -->
<select id="userlogin" parameterType="java.lang.String" resultType="MemberDto">
	 SELECT PW, AUTH 
        FROM SECURITY_LOGIN
                WHERE ID = #{id}
</select>

<!-- 업체 회원가입-->
<insert id="s_register" parameterType="MemberDto">
INSERT INTO REGISTER
(SEQ, ID, PW,  NAME,  ADDRESS, NICNAME, SELLERNUM,SELPICK, EMAIL,AUTH )
 VALUES(S_REGISTER_SEQ.NEXTVAL,#{id},#{pw},#{address},#{nicname},#{sellernum},#{selpick},#{email},'S');
</insert>

<!-- 소비자 회원가입 -->
<insert id="c_register" parameterType="MemberDto">
INSERT INTO REGISTER
(SEQ, ID, PW,  NAME,  ADDRESS, NICNAME, BIRTH,PHONNUM,AUTH )
 VALUES(REGISTER_SEQ.NEXTVAL,#{id},#{pw},#{name},#{address},#{nicname},#{birth},#{phonnum},'C');
</insert>

<!-- 업체 정보 -->
<select id="s_info" parameterType="MemberDto" resultType="MemberDto" >
SELECT  ID, SEQ,   NAME,  ADDRESS, NICNAME,  SELLERNUM,SELPICK,AUTH
FROM REGISTER
WHERE AUTH='S';
</select>

<!-- 업체 회원탈퇴 -->
<delete id="s_getout" parameterType="java.lang.String" >
DELETE FROM REGISTER WHERE ID = #{id};
</delete>

<!-- 소비자 정보 -->
<select id="c_info" parameterType="MemberDto" resultType="MemberDto" >
SELECT ID,  NAME,  ADDRESS, NICNAME, BIRTH,PHONNUM,AUTH
FROM REGISTER 
WHERE AUTH='C';
</select>

<!-- 소비자 회원탈퇴 -->
<delete id="c_getout" parameterType="java.lang.String">
DELETE FROM REGISTER WHERE ID = #{id};
</delete>

<insert id="c_insertBoard" parameterType="MemberDto">
INSERT INTO C_INQUIRY
(SEQ, REALFILE, ID, NICNAME, REGDATE, TITLE, CONTENT,AUTH, IMSI)
VALUES(C_INQUIRY_SEQ.NEXTVAL,#{realfile},#{ID},#{NICNAME},SYSDATE,#{title},#{content},'C','C');
</insert>

<select id="c_allSelectBoard" parameterType="MemberDto">
SELECT * FROM C_INQUIRY
</select>

</mapper>